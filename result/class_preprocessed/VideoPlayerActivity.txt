packag hotbitmapgg bilibili modul video import android annot suppress lint import android app activ import android content intent import android graphic drawabl anim drawabl import android net uri import android bundl import android view view import android view window manag import android widget imag view import android widget relat layout import android widget text view import hotbitmapgg bilibili base base activ import hotbitmapgg bilibili media media control import hotbitmapgg bilibili media video player view import hotbitmapgg bilibili media callback danmuku switch listen import hotbitmapgg bilibili media callback video listen import hotbitmapgg bilibili media danmuku bili danmuku download util import hotbitmapgg bilibili network retrofit helper import hotbitmapgg bilibili util constant util import hotbitmapgg ohmybilibili import java util hash map import butterknif bind view import master flame danmaku control draw handler import master flame danmaku control danmaku view import master flame danmaku danmaku model base danmaku import master flame danmaku danmaku model danmaku timer import master flame danmaku danmaku model display import master flame danmaku danmaku model android danmaku context import master flame danmaku danmaku parser base danmaku parser import observ import android schedul android schedul import function func import schedul schedul import danmaku ijk media player media player creat hcc public class video player activ extend base activ implement danmuku switch listen video listen bind view danmaku danmaku view danmaku view bind view player view video player view player view bind view buffer indic view buffer indic bind view video start relat layout video prepar layout bind view bili anim imag view anim imag view bind view video start info text view prepar text privat int cid privat string titl privat int posit privat string start text privat anim drawabl load anim privat danmaku context danmaku context overrid public int layout return layout activ video player overrid public void init view bundl save instanc state intent intent intent intent null cid intent int extra constant util titl intent string extra constant util init anim init media player suppress lint spars array privat void init media player media control media control media control media control set titl titl player view set media control media control player view set media buffer indic buffer indic player view request focus player view set info listen info listen player view set seek complet listen seek complet listen player view set complet listen complet listen player view set control event listen control event listen media control set danmaku switch listen media control set video event danmaku view enabl danmaku draw cach true hash map integ integ max line pair hash map max line pair put base danmaku hash map integ boolean overlap enabl pair hash map overlap enabl pair put base danmaku true overlap enabl pair put base danmaku true danmaku context danmaku context creat danmaku context set danmaku style display set duplic merg enabl fals set scroll speed factor set scale text size set maximum line max line pair prevent overlap overlap enabl pair load data privat void init anim video prepar layout set visibl view start text start text prepar text set text start text load anim anim drawabl anim imag view background load anim start overrid public void init tool bar window set flag window manag layout param window manag layout param window set background drawabl null window add flag window manag layout param overrid public void load data retrofit helper bili video url cid constant util compos bind lifecycl map video info uri pars video info durl url observ android schedul main thread flat map func uri observ base danmaku parser overrid public observ base danmaku parser call uri uri player view set video uri player view set prepar listen load anim stop start text start text prepar text set text start text video prepar layout set visibl view string url http comment bilibili cid xml return bili danmuku download util download url subscrib schedul observ android schedul main thread subscrib base danmaku parser danmaku view prepar base danmaku parser danmaku context danmaku view show fals danmaku view enabl danmaku draw cach fals danmaku view set callback draw handler callback overrid public void prepar danmaku view start overrid public void updat timer danmaku timer danmaku timer overrid public void danmaku shown base danmaku danmaku overrid public void draw finish player view start throwabl start text start text prepar text set text start text start text start text throwabl messag prepar text set text start text privat media player info listen info listen media player info listen overrid public boolean info media player int int extra media player danmaku view null danmaku view prepar danmaku view paus buffer indic null buffer indic set visibl view els media player danmaku view null danmaku view paus danmaku view resum buffer indic null buffer indic set visibl view return true privat media player seek complet listen seek complet listen media player seek complet listen overrid public void seek complet media player danmaku view null danmaku view prepar danmaku view seek current posit privat media player complet listen complet listen media player complet listen overrid public void complet media player danmaku view null danmaku view prepar danmaku view seek long danmaku view paus player view paus privat video player view control event listen control event listen video player view control event listen overrid public void video paus danmaku view null danmaku view prepar danmaku view paus overrid public void video resum danmaku view null danmaku view paus danmaku view resum overrid protect void resum super resum danmaku view null danmaku view prepar danmaku view paus danmaku view seek long posit player view null player view play player view seek posit overrid protect void paus super paus player view null posit player view current posit player view paus danmaku view null danmaku view prepar danmaku view paus overrid public void press super press danmaku view null danmaku view releas danmaku view null load anim null load anim stop load anim null overrid protect void destroy super destroy player view null player view draw cach enabl player view destroy draw cach danmaku view null danmaku view paus danmaku view releas danmaku view null load anim null load anim stop load anim null overrid public void set danmaku show boolean show danmaku view null show danmaku view show els danmaku view hide overrid public void press public static void launch activ activ int cid string titl intent intent intent activ video player activ class intent put extra constant util cid intent put extra constant util titl activ start activ intent 