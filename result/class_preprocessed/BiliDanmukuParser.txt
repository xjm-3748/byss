packag hotbitmapgg bilibili media danmuku import android graphic color import android text text util import org json array import org json import org xml sax attribut import org xml sax input sourc import org xml sax import org xml sax reader import org xml sax helper default handler import org xml sax helper reader factori import java import java util local import master flame danmaku danmaku model alpha valu import master flame danmaku danmaku model base danmaku import master flame danmaku danmaku model durat import master flame danmaku danmaku model display import master flame danmaku danmaku model android danmaku factori import master flame danmaku danmaku model android danmakus import master flame danmaku danmaku parser base danmaku parser import master flame danmaku danmaku parser android android file sourc import master flame danmaku danmaku util danmaku util creat hcc public class bili danmuku parser extend base danmaku parser privat float disp scale privat float disp scale static system set properti org xml sax driver org xmlpull sax driver overrid public danmakus pars data sourc null android file sourc sourc android file sourc data sourc tri reader xml reader reader factori creat reader xml content handler content handler xml content handler xml reader set content handler content handler xml reader pars input sourc sourc data return content handler result catch print stack trace catch print stack trace return null public class xml content handler extend default handler privat static final string true public danmakus result null public base danmaku item null public boolean complet fals public int index public danmakus result return result overrid public void start document throw result danmakus overrid public void document throw complet true overrid public void start element string uri string local string attribut attribut throw string tag local length local tag tag case local default trim tag equal hash string valu attribut valu pars valu danmaku string valu valu split valu length long time long float pars float valu int type integ pars int valu float text size float pars float valu int color int long pars long valu ffffffff int pool type integ pars int valu item context danmaku factori creat danmaku type context item null item set time time item text size text size disp densiti item text color color item text shadow color color color color color overrid public void element string uri string local string throw item null item durat null string tag local length local tag equal ignor case item set timer timer result add item item item null overrid public void charact char int start int length item null danmaku util fill text item decod xml string string start length item index index initi specail danmaku data string text string valu item text trim item type base danmaku text start text text text substr text length string text arr null text split tri array json array array text text arr string json array length int text arr length text arr json array string catch print stack trace text arr null text arr length item null return item text text arr float float pars float text arr float float pars float text arr float float string alpha arr text arr split int alpha int alpha valu float pars float alpha arr int alpha alpha alpha arr length alpha int alpha valu float pars float alpha arr long alpha duraion long float pars float text arr long translat durat alpha duraion long translat start delay float rotat rotat text arr length rotat float pars float text arr rotat float pars float text arr text arr length float pars float text arr float pars float text arr equal text arr translat durat integ pars int text arr equal text arr translat start delay long float pars float text arr percentag number danmaku factori percentag number danmaku factori percentag number danmaku factori percentag number danmaku factori item durat durat alpha duraion item rotat rotat item rotat rotat context danmaku factori fill translat data item translat durat translat start delay disp scale disp scale context danmaku factori fill alpha data item alpha alpha alpha duraion text arr length text util empti text arr equal text arr item text shadow color color text arr length text arr text arr length eas text arr length equal text arr string motion path string text arr substr string point str array motion path string split point str array null point str array length float point float point str array length int point str array length string point array point str array split point float pars float point array point float pars float point array context danmaku factori fill line path data item point disp scale disp scale privat string decod xml string string titl titl amp titl titl replac amp titl quot titl titl replac quot titl titl titl replac titl titl titl replac return titl privat boolean percentag number float number return number number overrid public base danmaku parser set display display disp super set display disp disp scale disp width danmaku factori disp scale disp height danmaku factori return 