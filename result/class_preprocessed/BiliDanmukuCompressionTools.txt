packag hotbitmapgg bilibili media danmuku import java util zip deflat import java util zip inflat import java util zip data format import java byte array output stream import java creat hcc public class bili danmuku compress tool privat bili danmuku compress tool public static byte compress byte valu int offset int length int compress level byte array output stream bos byte array output stream length deflat compressor deflat tri compressor set level compress level compressor set input valu offset length compressor finish final byte buf byte compressor finish true int count compressor deflat buf bos write buf count final compressor return bos byte array public static byte compress byte valu int offset int length return compress valu offset length deflat public static byte compress byte valu return compress valu valu length deflat public static byte decompress byte valu throw data format byte array output stream bos byte array output stream valu length inflat decompressor inflat tri decompressor set input valu final byte buf byte decompressor finish int count decompressor inflat buf bos write buf count final decompressor return bos byte array static byte decompress byte data throw data format byte dest byte data length system arraycopi data dest data length dest dest data dest inflat decompress inflat decompress set input data byte buffer array byte byte array output stream bao byte array output stream tri int decompress inflat buffer array bao write buffer array data bao byte array catch print stack trace final tri bao flush bao close catch print stack trace decompress return data 