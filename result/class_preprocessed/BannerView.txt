packag hotbitmapgg bilibili widget banner import android app activ import android content context import android support view view pager import android util attribut set import android view layout inflat import android view view import android widget imag view import android widget linear layout import android widget relat layout import bumptech glide glide import bumptech glide load engin disk cach strategi import hotbitmapgg bilibili modul common browser activ import hotbitmapgg bilibili util display util import hotbitmapgg ohmybilibili import java util array list import java util list import java util concurr time unit import butterknif bind view import butterknif butter knife import observ import subscript import android schedul android schedul import schedul schedul import subscript composit subscript creat hcc banner public class banner view extend relat layout implement banner adapt view pager item click listen bind view layout banner viewpag view pager view pager bind view layout banner point group linear layout point privat composit subscript composit subscript privat int delay time privat list imag view imag view list privat list banner entiti banner list indic privat int select res drawabl shape dot select indic privat int selcet res drawabl shape dot default privat int current pos public banner view context context context null public banner view context context attribut set attr context attr public banner view context context attribut set attr int def style attr super context attr def style attr layout inflat context inflat layout layout custom banner true butter knife bind imag view list array list param time public banner view delay time int time delay time time return point res param select res param unselcet res public void set point res int select res int unselcet res select res select res selcet res unselcet res public void build list banner entiti list destroy list size set visibl return banner list array list banner list add list final int point size point size banner list size point size banner list add list point child count point remov view layout int point size view dot view context dot set background resourc selcet res linear layout layout param param linear layout layout param display util context display util context param left margin dot set layout param param dot set enabl fals point add view dot point child set background resourc select res int banner list size imag view imag view imag view context glide context load banner list img center crop disk cach strategi disk cach strategi placehold drawabl bili default imag dont anim imag view imag view list add imag view view pager clear page chang listen view pager add page chang listen view pager page chang listen overrid public void page scroll int posit float posit offset int posit offset pixel overrid public void page select int pos pos pos point size current pos pos int point child count point child set background resourc selcet res point child pos set background resourc select res overrid public void page scroll state chang int state switch state case view pager stop scroll start scroll break case view pager stop scroll composit subscript unsubscrib break banner adapt banner adapt banner adapt imag view list view pager set adapt banner adapt banner adapt notifi data set chang banner adapt setm view pager item click listen start scroll privat boolean stop scroll fals privat void start scroll composit subscript composit subscript stop scroll fals subscript subscript observ timer delay time time unit subscrib schedul observ android schedul main thread subscrib long stop scroll return stop scroll true view pager set current item view pager current item composit subscript add subscript privat void stop scroll stop scroll true public void destroy composit subscript null composit subscript unsubscrib view pager item overrid public void item click browser activ launch activ context banner list current pos link banner list current pos titl 