packag hotbitmapgg bilibili media import android app activ import android app alert dialog import android content context import android content intent import android media audio manag import android net uri import android util attribut set import android util pair import android view key event import android view motion event import android view surfac holder import android view surfac view import android view view import android view view group layout param import hotbitmapgg bilibili media callback media player listen import hotbitmapgg ohmybilibili import java import danmaku ijk media player media player import danmaku ijk media player media player buffer updat listen import danmaku ijk media player media player complet listen import danmaku ijk media player media player error listen import danmaku ijk media player media player info listen import danmaku ijk media player media player prepar listen import danmaku ijk media player media player seek complet listen import danmaku ijk media player media player video size chang listen import danmaku ijk media player ijk media player import danmaku ijk media player pragma debug log creat hcc video view public class video player view extend surfac view implement media player listen privat static final string video player view class public static final int public static final int public static final int public static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat static final int privat uri uri privat long durat privat string user agent privat int current state privat int target state privat int video layout privat surfac holder surfac holder null privat media player media player null privat int video width privat int video height privat int video sar num privat int video sar den privat int surfac width privat int surfac height privat media control media control privat view media buffer indic privat complet listen complet listen privat prepar listen prepar listen privat error listen error listen privat seek complet listen seek complet listen privat info listen info listen privat buffer updat listen buffer updat listen privat control event listen control event listen privat int current buffer percentag privat long seek prepar privat boolean paus true privat boolean seek true privat boolean seek true privat context context video size chang listen size chang listen video size chang listen public void video size chang media player int width int height int sar num int sar den debug log dfmt video size chang width height video width video width video height video height video sar num sar num video sar den sar den video width video height set video layout video layout prepar listen prepar listen prepar listen public void prepar media player debug log prepar current state target state prepar listen null prepar listen prepar media player media control null media control set enabl true video width video width video height video height long seek posit seek prepar seek posit seek seek posit video width video height set video layout video layout surfac width video width surfac height video height target state start media control null media control show els play seek posit current posit media control null media control show els target state start privat complet listen complet listen complet listen public void complet media player debug log complet current state target state media control null media control hide complet listen null complet listen complet media player privat error listen error listen error listen public boolean error media player int framework err int impl err debug log dfmt error framework err impl err current state target state media control null media control hide error listen null error listen error media player framework err impl err return true window token null int messag framework err media player string video error text invalid progress playback string video error text unknown alert dialog builder context set titl string video error titl set messag messag set posit button string video error button dialog button complet listen null complet listen complet media player set cancel fals show return true privat buffer updat listen buffer updat listen buffer updat listen public void buffer updat media player int percent current buffer percentag percent buffer updat listen null buffer updat listen buffer updat percent privat info listen info listen info listen overrid public boolean info media player int int extra debug log dfmt info extra info listen null info listen info extra els media player null media player debug log dfmt info media buffer indic null media buffer indic set visibl view els media player debug log dfmt info media buffer indic null media buffer indic set visibl view return true privat seek complet listen seek complet listen seek complet listen overrid public void seek complet media player debug log seek complet seek complet listen null seek complet listen seek complet surfac holder callback callback surfac holder callback public void surfac chang surfac holder holder int format int int surfac holder holder media player null media player set display surfac holder surfac width surfac height boolean valid state target state boolean valid size video width video height media player null valid state valid size seek prepar seek seek prepar start media control null media control show media control hide media control show public void surfac creat surfac holder holder surfac holder holder media player null current state target state media player set display surfac holder resum els open video public void surfac destroy surfac holder holder surfac holder null media control null media control hide current state releas true public video player view context context super context init video view context public video player view context context attribut set attr context attr public video player view context context attribut set attr int def style super context attr def style init video view context overrid protect void measur int width measur spec int height measur spec int width default size video width width measur spec int height default size video height height measur spec set measur dimens width height public void set video layout int layout layout param layout param pair integ integ res screen resolut resolut context int window width res window height res float window ratio window width float window height int sar num video sar num int sar den video sar den video height video width float video ratio float video width video height sar num sar den video ratio video ratio sar num sar den surfac height video height surfac width video width layout surfac width window width surfac height window height width int surfac height video ratio height surfac height els layout width window ratio video ratio window width int video ratio window height height window ratio video ratio window height int window width video ratio els boolean full layout width full window ratio video ratio window width int video ratio window height height full window ratio video ratio window height int window width video ratio set layout param holder set fix size surfac width surfac height debug log dfmt surfac window video width video height video ratio video sar num video sar den surfac width surfac height width height window width window height window ratio video layout layout privat void init video view context ctx context ctx video width video height video sar num video sar den holder add callback callback set focus true set focus touch mode true request focus current state target state ctx instanceof activ activ ctx set volum control stream audio manag public boolean valid return surfac holder null surfac holder surfac valid public void set video path string path set video uri pars path public void set video uri uri uri uri seek prepar open video request layout invalid public void set user agent string user agent public void stop playback media player null media player stop media player releas media player null current state target state privat void open video uri null surfac holder null return intent intent android music musicservicecommand put extra command paus context send broadcast releas fals tri durat current buffer percentag media player android media player ijk media player ijk media player null uri null ijk media player ijk media player ijk media player set log enabl fals ijk media player set option ijk media player skip loop filter media player ijk media player assert media player null media player set prepar listen prepar listen media player set video size chang listen size chang listen media player set complet listen complet listen media player set error listen error listen media player set buffer updat listen buffer updat listen media player set info listen info listen media player set seek complet listen seek complet listen uri null media player set data sourc uri string media player set display surfac holder media player set screen play true media player prepar async current state attach media control catch illeg argument debug log unabl open content uri current state target state error listen error media player media player public void set media control media control control media control null media control hide media control control attach media control public void set media buffer indic view media buffer indic media buffer indic null media buffer indic set visibl view media buffer indic media buffer indic privat void attach media control media player null media control null media control set media player view anchor view parent instanceof view view parent media control set anchor view anchor view media control set enabl playback state public void set prepar listen prepar listen prepar listen public void set complet listen complet listen complet listen public void set error listen error listen error listen public void set buffer updat listen buffer updat listen buffer updat listen public void set seek complet listen seek complet listen seek complet listen public void set info listen info listen info listen public void set control event listen control event listen control event listen privat void releas boolean cleartargetst media player null media player reset media player releas media player null current state cleartargetst target state overrid public boolean touch event motion event playback state media control null toggl media control visibl return fals overrid public boolean trackbal event motion event playback state media control null toggl media control visibl return fals overrid public boolean key int key code key event event boolean key code support key code key event key code key event key code key event key code key event key code key event key code key event playback state key code support media control null key code key event key code key event key code key event media player play paus media control show els start media control hide return true els key code key event media player play paus media control show els toggl media control visibl return super key key code event privat void toggl media control visibl media control show media control hide els media control show overrid public void start playback state media player start current state target state control event listen video resum overrid public void paus playback state media player play media player paus current state target state control event listen video paus public void resum surfac holder null current state target state els current state open video overrid public int durat playback state durat return int durat durat media player durat return int durat durat return int durat overrid public int current posit playback state long posit media player current posit return int posit return overrid public void seek long msec playback state media player seek msec seek prepar els seek prepar msec overrid public boolean play return playback state media player play overrid public int buffer percentag media player null return current buffer percentag return public int video width return video width public int video height return video height protect boolean playback state return media player null current state current state current state public boolean paus return paus public boolean seek return seek public boolean seek return seek public interfac control event listen void video paus void video resum 