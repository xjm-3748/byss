packag hotbitmapgg bilibili modul home live import android app activ import android content intent import android graphic drawabl anim drawabl import android net uri import android bundl import android support app action bar import android support widget toolbar import android view menu item import android view surfac holder import android view surfac view import android view view import android widget imag view import android widget relat layout import android widget text view import bumptech glide glide import bumptech glide load engin disk cach strategi import hotbitmapgg bilibili base base activ import hotbitmapgg bilibili modul user user info detail activ import hotbitmapgg bilibili network retrofit helper import hotbitmapgg bilibili util constant util import hotbitmapgg bilibili util log util import hotbitmapgg bilibili widget circl imag view import hotbitmapgg bilibili widget livelik love layout import hotbitmapgg ohmybilibili import java import java util concurr time unit import butterknif bind view import butterknif click import observ import android schedul android schedul import function func import schedul schedul import danmaku ijk media player ijk media player creat hcc public class live player activ extend base activ bind view video view surfac view video view bind view bili anim imag view anim view bind view play imag view play btn bind view bottom layout relat layout bottom layout bind view bottom play imag view bottom play btn bind view bottom fullscreen imag view bottom fullscreen bind view video start info text view load bind view toolbar toolbar toolbar bind view user pic circl imag view user pic bind view user text view user bind view live num text view live num bind view love layout love layout love layout bind view bottom love imag view mlove privat int flag privat int cid privat string titl privat int onlin privat string face privat string privat int mid privat surfac holder holder privat boolean play fals privat ijk media player ijk media player privat anim drawabl anim view background overrid public int layout return layout activ live detail overrid public void init view bundl save instanc state intent intent intent intent null cid intent int extra constant util titl intent string extra constant util onlin intent int extra constant util face intent string extra constant util intent string extra constant util mid intent int extra constant util init video init user info start anim privat void init user info glide live player activ load face center crop dont anim placehold drawabl ico user default disk cach strategi disk cach strategi user pic user set text live num set text string valu onlin privat void start anim anim view background anim drawabl anim view background anim view background start privat void stop anim anim view background stop anim view set visibl view load set visibl view overrid public void init tool bar toolbar set titl titl set support action bar toolbar action bar action bar support action bar action bar null action bar set display home enabl true overrid public boolean option item select menu item item item item android home press return super option item select item privat void init video holder video view holder ijk media player ijk media player live url privat void live url retrofit helper live live url cid compos bind lifecycl map respons bodi tri string str respons bodi string string result str substr str index str index return result catch print stack trace return null observ android schedul main thread flat map func string observ long overrid public observ long call string play video return observ timer time unit subscrib schedul observ android schedul main thread subscrib long stop anim play true video view set visibl view play btn set imag resourc drawabl stop bottom play btn set imag resourc drawabl portrait stop throwabl log util url throwabl messag privat void play video string uri tri ijk media player set data sourc uri pars uri ijk media player set display holder holder add callback surfac holder callback overrid public void surfac creat surfac holder holder overrid public void surfac chang surfac holder holder int format int width int height ijk media player set display holder overrid public void surfac destroy surfac holder holder ijk media player prepar async ijk media player start catch print stack trace ijk media player set background fals privat void start bottom show anim bottom layout set visibl view play btn set visibl view privat void start bottom hide anim bottom layout set visibl view play btn set visibl view click play bottom play bottom fullscreen video view user pic bottom love void click view view switch view case play control video break case bottom play control video break case bottom fullscreen break case video view flag start bottom show anim flag els start bottom hide anim flag break case user pic user info detail activ launch live player activ mid face control video play btn set visibl view break case bottom love love layout add love break privat void control video play ijk media player paus play fals play btn set imag resourc drawabl play bottom play btn set imag resourc drawabl portrait play els ijk media player start play true play btn set imag resourc drawabl stop bottom play btn set imag resourc drawabl portrait stop public static void launch activ activ int cid string titl int onlin string face string int mid intent intent intent activ live player activ class intent put extra constant util cid intent put extra constant util titl intent put extra constant util onlin intent put extra constant util face intent put extra constant util intent put extra constant util mid activ start activ intent overrid protect void destroy super destroy ijk media player releas 